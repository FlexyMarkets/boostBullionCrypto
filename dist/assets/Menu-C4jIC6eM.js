import{r as s,j as K,a6 as Se,ao as Te,ap as q,H as fe,aq as B,d as de,g as he,s as W,ar as ke,u as me,K as De,as as Ie,y as ie,c as X,an as Le,a as ge,aj as Oe,at as ae,a8 as Ke}from"./index-7D1jf1M_.js";import{a as ze}from"./List-Cx4iqPhx.js";function Je({controlled:t,default:e,name:o,state:x="value"}){const{current:m}=s.useRef(t!==void 0),[d,h]=s.useState(e),u=m?t:d,f=s.useCallback(y=>{m||h(y)},[]);return[u,f]}const ve=s.createContext();function Qe({value:t,...e}){return K.jsx(ve.Provider,{value:t??!0,...e})}const Fe=()=>s.useContext(ve)??!1;function G(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function le(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function Pe(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.startsWith(e.keys.join(""))}function A(t,e,o,x,m,d){let h=!1,u=m(t,e,e?o:!1);for(;u;){if(u===t.firstChild){if(h)return!1;h=!0}const f=x?!1:u.disabled||u.getAttribute("aria-disabled")==="true";if(!u.hasAttribute("tabindex")||!Pe(u,d)||f)u=m(t,u,o);else return u.focus(),!0}return!1}const je=s.forwardRef(function(e,o){const{actions:x,autoFocus:m=!1,autoFocusItem:d=!1,children:h,className:u,disabledItemsFocusable:f=!1,disableListWrap:y=!1,onKeyDown:T,variant:I="selectedMenu",...z}=e,n=s.useRef(null),v=s.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Se(()=>{m&&n.current.focus()},[m]),s.useImperativeHandle(x,()=>({adjustStyleForScrollbar:(r,{direction:i})=>{const p=!n.current.style.width;if(r.clientHeight<n.current.clientHeight&&p){const E=`${Te(q(r))}px`;n.current.style[i==="rtl"?"paddingLeft":"paddingRight"]=E,n.current.style.width=`calc(100% + ${E})`}return n.current}}),[]);const F=r=>{const i=n.current,p=r.key;if(r.ctrlKey||r.metaKey||r.altKey){T&&T(r);return}const M=B(i).activeElement;if(p==="ArrowDown")r.preventDefault(),A(i,M,y,f,G);else if(p==="ArrowUp")r.preventDefault(),A(i,M,y,f,le);else if(p==="Home")r.preventDefault(),A(i,null,y,f,G);else if(p==="End")r.preventDefault(),A(i,null,y,f,le);else if(p.length===1){const l=v.current,b=p.toLowerCase(),D=performance.now();l.keys.length>0&&(D-l.lastTime>500?(l.keys=[],l.repeating=!0,l.previousKeyMatched=!0):l.repeating&&b!==l.keys[0]&&(l.repeating=!1)),l.lastTime=D,l.keys.push(b);const S=M&&!l.repeating&&Pe(M,l);l.previousKeyMatched&&(S||A(i,M,!1,f,G,l))?r.preventDefault():l.previousKeyMatched=!1}T&&T(r)},L=fe(n,o);let a=-1;s.Children.forEach(h,(r,i)=>{if(!s.isValidElement(r)){a===i&&(a+=1,a>=h.length&&(a=-1));return}r.props.disabled||(I==="selectedMenu"&&r.props.selected||a===-1)&&(a=i),a===i&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(a+=1,a>=h.length&&(a=-1))});const C=s.Children.map(h,(r,i)=>{if(i===a){const p={};return d&&(p.autoFocus=!0),r.props.tabIndex===void 0&&I==="selectedMenu"&&(p.tabIndex=0),s.cloneElement(r,p)}return r});return K.jsx(ze,{role:"menu",ref:L,className:u,onKeyDown:F,tabIndex:m?0:-1,...z,children:C})});function He(t){return de("MuiPopover",t)}he("MuiPopover",["root","paper"]);function ce(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.height/2:e==="bottom"&&(o=t.height),o}function ue(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.width/2:e==="right"&&(o=t.width),o}function pe(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function _(t){return typeof t=="function"?t():t}const Ne=t=>{const{classes:e}=t;return ge({root:["root"],paper:["paper"]},He,e)},Ae=W(Oe,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ye=W(ke,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),We=s.forwardRef(function(e,o){const x=me({props:e,name:"MuiPopover"}),{action:m,anchorEl:d,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:f="anchorEl",children:y,className:T,container:I,elevation:z=8,marginThreshold:n=16,open:v,PaperProps:F={},slots:L={},slotProps:a={},transformOrigin:C={vertical:"top",horizontal:"left"},TransitionComponent:r=De,transitionDuration:i="auto",TransitionProps:{onEntering:p,...E}={},disableScrollLock:M=!1,...l}=x,b=(a==null?void 0:a.paper)??F,D=s.useRef(),S={...x,anchorOrigin:h,anchorReference:f,elevation:z,marginThreshold:n,externalPaperSlotProps:b,transformOrigin:C,TransitionComponent:r,transitionDuration:i,TransitionProps:E},N=Ne(S),U=s.useCallback(()=>{if(f==="anchorPosition")return u;const c=_(d),P=(c&&c.nodeType===1?c:B(D.current).body).getBoundingClientRect();return{top:P.top+ce(P,h.vertical),left:P.left+ue(P,h.horizontal)}},[d,h.horizontal,h.vertical,u,f]),$=s.useCallback(c=>({vertical:ce(c,C.vertical),horizontal:ue(c,C.horizontal)}),[C.horizontal,C.vertical]),V=s.useCallback(c=>{const g={width:c.offsetWidth,height:c.offsetHeight},P=$(g);if(f==="none")return{top:null,left:null,transformOrigin:pe(P)};const ee=U();let j=ee.top-P.vertical,H=ee.left-P.horizontal;const te=j+g.height,oe=H+g.width,re=q(_(d)),se=re.innerHeight-n,ne=re.innerWidth-n;if(n!==null&&j<n){const R=j-n;j-=R,P.vertical+=R}else if(n!==null&&te>se){const R=te-se;j-=R,P.vertical+=R}if(n!==null&&H<n){const R=H-n;H-=R,P.horizontal+=R}else if(oe>ne){const R=oe-ne;H-=R,P.horizontal+=R}return{top:`${Math.round(j)}px`,left:`${Math.round(H)}px`,transformOrigin:pe(P)}},[d,f,U,$,n]),[w,O]=s.useState(v),k=s.useCallback(()=>{const c=D.current;if(!c)return;const g=V(c);g.top!==null&&c.style.setProperty("top",g.top),g.left!==null&&(c.style.left=g.left),c.style.transformOrigin=g.transformOrigin,O(!0)},[V]);s.useEffect(()=>(M&&window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)),[d,M,k]);const be=(c,g)=>{p&&p(c,g),k()},we=()=>{O(!1)};s.useEffect(()=>{v&&k()}),s.useImperativeHandle(m,()=>v?{updatePosition:()=>{k()}}:null,[v,k]),s.useEffect(()=>{if(!v)return;const c=Ie(()=>{k()}),g=q(d);return g.addEventListener("resize",c),()=>{c.clear(),g.removeEventListener("resize",c)}},[d,v,k]);let Y=i;i==="auto"&&!r.muiSupportAuto&&(Y=void 0);const Me=I||(d?B(_(d)).body:void 0),J={slots:L,slotProps:{...a,paper:b}},[Re,Q]=ie("paper",{elementType:ye,externalForwardedProps:J,additionalProps:{elevation:z,className:X(N.paper,b==null?void 0:b.className),style:w?b.style:{...b.style,opacity:0}},ownerState:S}),[Z,{slotProps:xe,...Ce}]=ie("root",{elementType:Ae,externalForwardedProps:J,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:Me,open:v},ownerState:S,className:X(N.root,T)}),Ee=fe(D,Q.ref);return K.jsx(Z,{...Ce,...!Le(Z)&&{slotProps:xe,disableScrollLock:M},...l,ref:o,children:K.jsx(r,{appear:!0,in:v,onEntering:be,onExited:we,timeout:Y,...E,children:K.jsx(Re,{...Q,ref:Ee,children:y})})})});function Ue(t){return de("MuiMenu",t)}he("MuiMenu",["root","paper","list"]);const $e={vertical:"top",horizontal:"right"},Ve={vertical:"top",horizontal:"left"},Ge=t=>{const{classes:e}=t;return ge({root:["root"],paper:["paper"],list:["list"]},Ue,e)},_e=W(We,{shouldForwardProp:t=>Ke(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),qe=W(ye,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),Be=W(je,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Ze=s.forwardRef(function(e,o){const x=me({props:e,name:"MuiMenu"}),{autoFocus:m=!0,children:d,className:h,disableAutoFocusItem:u=!1,MenuListProps:f={},onClose:y,open:T,PaperProps:I={},PopoverClasses:z,transitionDuration:n="auto",TransitionProps:{onEntering:v,...F}={},variant:L="selectedMenu",slots:a={},slotProps:C={},...r}=x,i=Fe(),p={...x,autoFocus:m,disableAutoFocusItem:u,MenuListProps:f,onEntering:v,PaperProps:I,transitionDuration:n,TransitionProps:F,variant:L},E=Ge(p),M=m&&!u&&T,l=s.useRef(null),b=(w,O)=>{l.current&&l.current.adjustStyleForScrollbar(w,{direction:i?"rtl":"ltr"}),v&&v(w,O)},D=w=>{w.key==="Tab"&&(w.preventDefault(),y&&y(w,"tabKeyDown"))};let S=-1;s.Children.map(d,(w,O)=>{s.isValidElement(w)&&(w.props.disabled||(L==="selectedMenu"&&w.props.selected||S===-1)&&(S=O))});const N=a.paper??qe,U=C.paper??I,$=ae({elementType:a.root,externalSlotProps:C.root,ownerState:p,className:[E.root,h]}),V=ae({elementType:N,externalSlotProps:U,ownerState:p,className:E.paper});return K.jsx(_e,{onClose:y,anchorOrigin:{vertical:"bottom",horizontal:i?"right":"left"},transformOrigin:i?$e:Ve,slots:{paper:N,root:a.root},slotProps:{root:$,paper:V},open:T,ref:o,transitionDuration:n,TransitionProps:{onEntering:b,...F},ownerState:p,...r,classes:z,children:K.jsx(Be,{onKeyDown:D,actions:l,autoFocus:m&&(S===-1||u),autoFocusItem:M,variant:L,...f,className:X(E.list,f.className),children:d})})});export{Ze as M,We as P,Qe as R,Je as a,je as b,Fe as u};
