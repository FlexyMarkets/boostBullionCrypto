import{v as D,w as p,r as M,k as N,l as Q,n as U,W as $,x as H,j as e,T as r,S as f,C as J,G as l,p as i,O as K,I as X,i as Y,V as Z,R as _,a as ee,q as se,t as T}from"./index-B-uwLYYL.js";import{C as re}from"./Container-CZ2dOfaf.js";import{D as te}from"./Divider-CVj_tKgi.js";import{S as ae}from"./Skeleton-BmGxnbsN.js";import{T as v}from"./TextField-DTohaBMm.js";import"./dividerClasses-D-rPc2Eo.js";import"./Select-eJbSdZdW.js";import"./Menu-Dwi6IjF3.js";import"./List-DjS9Juue.js";import"./FormControl-ce_fWMrF.js";const ne=D({amount:p().trim().min(1,"Please type your transfer amount"),referralCode:p().trim().min(1,"Please type your referral code"),password:p().trim().min(1,"Please type your transaction password")});function fe(){var w,g,y;const[d,z]=M.useState(!1),I=()=>z(h=>!h),{data:m,isLoading:P,refetch:E}=N(),c=m==null?void 0:m.data,j=Q(),b={amount:"",referralCode:"",password:""},{register:u,handleSubmit:O,watch:k,setError:A,reset:F,formState:{errors:t}}=U({resolver:se(ne),defaultValues:b}),[R,{isLoading:L}]=$(),o=k("referralCode"),{data:a,isError:W,error:x,isFetching:q}=H({referralCode:o},{skip:!o,refetchOnMountOrArgChange:!0,refetchOnReconnect:!0});let n=null;!o||o.trim()===""?n=null:q?n=e.jsx(r,{children:"Loading..."}):W?n=e.jsx(r,{color:"red",children:(w=x==null?void 0:x.data)==null?void 0:w.message}):(g=a==null?void 0:a.data)!=null&&g.name&&(n=e.jsx(r,{children:(y=a==null?void 0:a.data)==null?void 0:y.name}));const B=async h=>{var S,C;try{const s=await R(h).unwrap();s!=null&&s.status&&(E(),F(b),j(T({open:!0,message:s==null?void 0:s.message,severity:"success"})))}catch(s){(S=s==null?void 0:s.data)!=null&&S.data?Object.entries(s.data.data).forEach(([G,V])=>{A(G,{type:"server",message:V})}):j(T({open:!0,message:((C=s==null?void 0:s.data)==null?void 0:C.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(f,{mt:"100px",children:e.jsxs(re,{children:[e.jsx(r,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Internal Transfer"}),e.jsxs(J,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(r,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx(te,{sx:{my:"1.2rem"}}),e.jsxs(f,{gap:"2rem",component:"form",onSubmit:O(B),children:[e.jsxs(l,{container:!0,size:12,spacing:2,children:[e.jsxs(l,{item:!0,size:{xs:12,sm:6},children:[e.jsxs(f,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[e.jsx(i,{sx:{mb:".5rem"},children:"Amount to Fund Transfer *"}),e.jsx(i,{sx:{mb:".5rem"},children:P?e.jsx(ae,{width:"100px"}):`Balance: ${c==null?void 0:c.TRADEBalance}`})]}),e.jsx(v,{...u("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount transfer",variant:"outlined"}),t.amount&&e.jsx(r,{color:"error",children:t.amount.message})]}),e.jsxs(l,{item:!0,size:{xs:12,sm:6},children:[e.jsx(i,{sx:{mb:".5rem"},children:"User Code *"}),e.jsx(v,{...u("referralCode",{require:!0}),size:"small",fullWidth:!0,placeholder:"Enter user id",variant:"outlined"}),e.jsx(i,{sx:{mb:".5rem"},children:n}),t.referralCode&&e.jsx(r,{color:"error",children:t.referralCode.message})]}),e.jsxs(l,{item:!0,size:{xs:12,sm:6},children:[e.jsx(i,{sx:{mb:".5rem"},children:"Transaction password *"}),e.jsx(K,{...u("password",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction password",variant:"outlined",type:d?"text":"password",endAdornment:e.jsx(X,{position:"end",children:e.jsx(Y,{"aria-label":d?"hide the password":"display the password",onClick:I,edge:"end",children:d?e.jsx(Z,{sx:{color:"#f1b811",fontSize:"20px"}}):e.jsx(_,{sx:{color:"#f1b811",fontSize:"20px"}})})})}),t.password&&e.jsx(r,{color:"error",children:t.password.message})]})]}),e.jsx(ee,{variant:"contained",size:"small",type:"submit",disabled:L,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})]})})}export{fe as default};
