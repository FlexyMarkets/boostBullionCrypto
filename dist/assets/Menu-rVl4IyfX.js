import{r as i,a0 as Se,aq as Ce,ar as q,a1 as fe,j,as as B,b as de,g as he,s as W,at as Te,d as me,au as ke,av as De,A as ie,e as X,aw as Ie,f as ge,al as Le,ag as Oe,ax as ae,a3 as ze}from"./index-BE25fc3N.js";import{a as Fe}from"./List-D6vlDv5V.js";function V(t,e,o){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:o?null:t.firstChild}function le(t,e,o){return t===e?o?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:o?null:t.lastChild}function Pe(t,e){if(e===void 0)return!0;let o=t.innerText;return o===void 0&&(o=t.textContent),o=o.trim().toLowerCase(),o.length===0?!1:e.repeating?o[0]===e.keys[0]:o.startsWith(e.keys.join(""))}function A(t,e,o,C,v,d){let h=!1,p=v(t,e,e?o:!1);for(;p;){if(p===t.firstChild){if(h)return!1;h=!0}const f=C?!1:p.disabled||p.getAttribute("aria-disabled")==="true";if(!p.hasAttribute("tabindex")||!Pe(p,d)||f)p=v(t,p,o);else return p.focus(),!0}return!1}const Ke=i.forwardRef(function(e,o){const{actions:C,autoFocus:v=!1,autoFocusItem:d=!1,children:h,className:p,disabledItemsFocusable:f=!1,disableListWrap:x=!1,onKeyDown:T,variant:I="selectedMenu",...z}=e,s=i.useRef(null),g=i.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Se(()=>{v&&s.current.focus()},[v]),i.useImperativeHandle(C,()=>({adjustStyleForScrollbar:(r,{direction:n})=>{const u=!s.current.style.width;if(r.clientHeight<s.current.clientHeight&&u){const E=`${Ce(q(r))}px`;s.current.style[n==="rtl"?"paddingLeft":"paddingRight"]=E,s.current.style.width=`calc(100% + ${E})`}return s.current}}),[]);const F=r=>{const n=s.current,u=r.key;if(r.ctrlKey||r.metaKey||r.altKey){T&&T(r);return}const b=B(n).activeElement;if(u==="ArrowDown")r.preventDefault(),A(n,b,x,f,V);else if(u==="ArrowUp")r.preventDefault(),A(n,b,x,f,le);else if(u==="Home")r.preventDefault(),A(n,null,x,f,V);else if(u==="End")r.preventDefault(),A(n,null,x,f,le);else if(u.length===1){const l=g.current,y=u.toLowerCase(),D=performance.now();l.keys.length>0&&(D-l.lastTime>500?(l.keys=[],l.repeating=!0,l.previousKeyMatched=!0):l.repeating&&y!==l.keys[0]&&(l.repeating=!1)),l.lastTime=D,l.keys.push(y);const S=b&&!l.repeating&&Pe(b,l);l.previousKeyMatched&&(S||A(n,b,!1,f,V,l))?r.preventDefault():l.previousKeyMatched=!1}T&&T(r)},L=fe(s,o);let a=-1;i.Children.forEach(h,(r,n)=>{if(!i.isValidElement(r)){a===n&&(a+=1,a>=h.length&&(a=-1));return}r.props.disabled||(I==="selectedMenu"&&r.props.selected||a===-1)&&(a=n),a===n&&(r.props.disabled||r.props.muiSkipListHighlight||r.type.muiSkipListHighlight)&&(a+=1,a>=h.length&&(a=-1))});const R=i.Children.map(h,(r,n)=>{if(n===a){const u={};return d&&(u.autoFocus=!0),r.props.tabIndex===void 0&&I==="selectedMenu"&&(u.tabIndex=0),i.cloneElement(r,u)}return r});return j.jsx(Fe,{role:"menu",ref:L,className:p,onKeyDown:F,tabIndex:v?0:-1,...z,children:R})});function He(t){return de("MuiPopover",t)}he("MuiPopover",["root","paper"]);function ce(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.height/2:e==="bottom"&&(o=t.height),o}function ue(t,e){let o=0;return typeof e=="number"?o=e:e==="center"?o=t.width/2:e==="right"&&(o=t.width),o}function pe(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function _(t){return typeof t=="function"?t():t}const je=t=>{const{classes:e}=t;return ge({root:["root"],paper:["paper"]},He,e)},Ne=W(Le,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ve=W(Te,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Ae=i.forwardRef(function(e,o){const C=me({props:e,name:"MuiPopover"}),{action:v,anchorEl:d,anchorOrigin:h={vertical:"top",horizontal:"left"},anchorPosition:p,anchorReference:f="anchorEl",children:x,className:T,container:I,elevation:z=8,marginThreshold:s=16,open:g,PaperProps:F={},slots:L={},slotProps:a={},transformOrigin:R={vertical:"top",horizontal:"left"},TransitionComponent:r=ke,transitionDuration:n="auto",TransitionProps:{onEntering:u,...E}={},disableScrollLock:b=!1,...l}=C,y=(a==null?void 0:a.paper)??F,D=i.useRef(),S={...C,anchorOrigin:h,anchorReference:f,elevation:z,marginThreshold:s,externalPaperSlotProps:y,transformOrigin:R,TransitionComponent:r,transitionDuration:n,TransitionProps:E},N=je(S),U=i.useCallback(()=>{if(f==="anchorPosition")return p;const c=_(d),P=(c&&c.nodeType===1?c:B(D.current).body).getBoundingClientRect();return{top:P.top+ce(P,h.vertical),left:P.left+ue(P,h.horizontal)}},[d,h.horizontal,h.vertical,p,f]),$=i.useCallback(c=>({vertical:ce(c,R.vertical),horizontal:ue(c,R.horizontal)}),[R.horizontal,R.vertical]),G=i.useCallback(c=>{const m={width:c.offsetWidth,height:c.offsetHeight},P=$(m);if(f==="none")return{top:null,left:null,transformOrigin:pe(P)};const ee=U();let K=ee.top-P.vertical,H=ee.left-P.horizontal;const te=K+m.height,oe=H+m.width,re=q(_(d)),se=re.innerHeight-s,ne=re.innerWidth-s;if(s!==null&&K<s){const M=K-s;K-=M,P.vertical+=M}else if(s!==null&&te>se){const M=te-se;K-=M,P.vertical+=M}if(s!==null&&H<s){const M=H-s;H-=M,P.horizontal+=M}else if(oe>ne){const M=oe-ne;H-=M,P.horizontal+=M}return{top:`${Math.round(K)}px`,left:`${Math.round(H)}px`,transformOrigin:pe(P)}},[d,f,U,$,s]),[w,O]=i.useState(g),k=i.useCallback(()=>{const c=D.current;if(!c)return;const m=G(c);m.top!==null&&c.style.setProperty("top",m.top),m.left!==null&&(c.style.left=m.left),c.style.transformOrigin=m.transformOrigin,O(!0)},[G]);i.useEffect(()=>(b&&window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)),[d,b,k]);const ye=(c,m)=>{u&&u(c,m),k()},we=()=>{O(!1)};i.useEffect(()=>{g&&k()}),i.useImperativeHandle(v,()=>g?{updatePosition:()=>{k()}}:null,[g,k]),i.useEffect(()=>{if(!g)return;const c=De(()=>{k()}),m=q(d);return m.addEventListener("resize",c),()=>{c.clear(),m.removeEventListener("resize",c)}},[d,g,k]);let Y=n;n==="auto"&&!r.muiSupportAuto&&(Y=void 0);const be=I||(d?B(_(d)).body:void 0),J={slots:L,slotProps:{...a,paper:y}},[Me,Q]=ie("paper",{elementType:ve,externalForwardedProps:J,additionalProps:{elevation:z,className:X(N.paper,y==null?void 0:y.className),style:w?y.style:{...y.style,opacity:0}},ownerState:S}),[Z,{slotProps:xe,...Re}]=ie("root",{elementType:Ne,externalForwardedProps:J,additionalProps:{slotProps:{backdrop:{invisible:!0}},container:be,open:g},ownerState:S,className:X(N.root,T)}),Ee=fe(D,Q.ref);return j.jsx(Z,{...Re,...!Ie(Z)&&{slotProps:xe,disableScrollLock:b},...l,ref:o,children:j.jsx(r,{appear:!0,in:g,onEntering:ye,onExited:we,timeout:Y,...E,children:j.jsx(Me,{...Q,ref:Ee,children:x})})})});function We(t){return de("MuiMenu",t)}he("MuiMenu",["root","paper","list"]);const Ue={vertical:"top",horizontal:"right"},$e={vertical:"top",horizontal:"left"},Ge=t=>{const{classes:e}=t;return ge({root:["root"],paper:["paper"],list:["list"]},We,e)},Ve=W(Ae,{shouldForwardProp:t=>ze(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),_e=W(ve,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),qe=W(Ke,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),Ye=i.forwardRef(function(e,o){const C=me({props:e,name:"MuiMenu"}),{autoFocus:v=!0,children:d,className:h,disableAutoFocusItem:p=!1,MenuListProps:f={},onClose:x,open:T,PaperProps:I={},PopoverClasses:z,transitionDuration:s="auto",TransitionProps:{onEntering:g,...F}={},variant:L="selectedMenu",slots:a={},slotProps:R={},...r}=C,n=Oe(),u={...C,autoFocus:v,disableAutoFocusItem:p,MenuListProps:f,onEntering:g,PaperProps:I,transitionDuration:s,TransitionProps:F,variant:L},E=Ge(u),b=v&&!p&&T,l=i.useRef(null),y=(w,O)=>{l.current&&l.current.adjustStyleForScrollbar(w,{direction:n?"rtl":"ltr"}),g&&g(w,O)},D=w=>{w.key==="Tab"&&(w.preventDefault(),x&&x(w,"tabKeyDown"))};let S=-1;i.Children.map(d,(w,O)=>{i.isValidElement(w)&&(w.props.disabled||(L==="selectedMenu"&&w.props.selected||S===-1)&&(S=O))});const N=a.paper??_e,U=R.paper??I,$=ae({elementType:a.root,externalSlotProps:R.root,ownerState:u,className:[E.root,h]}),G=ae({elementType:N,externalSlotProps:U,ownerState:u,className:E.paper});return j.jsx(Ve,{onClose:x,anchorOrigin:{vertical:"bottom",horizontal:n?"right":"left"},transformOrigin:n?Ue:$e,slots:{paper:N,root:a.root},slotProps:{root:$,paper:G},open:T,ref:o,transitionDuration:s,TransitionProps:{onEntering:y,...F},ownerState:u,...r,classes:z,children:j.jsx(qe,{onKeyDown:D,actions:l,autoFocus:v&&(S===-1||p),autoFocusItem:b,variant:L,...f,className:X(E.list,f.className),children:d})})});export{Ye as M,Ae as P,Ke as a};
