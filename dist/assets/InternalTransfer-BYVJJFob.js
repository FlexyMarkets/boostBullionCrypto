import{t as R,v as x,h as W,i as M,k as N,_ as Q,w as U,j as e,T as s,S as h,C as D,n as K,G as m,o as i,B as V,p as _,q as C}from"./index-7D1jf1M_.js";import{D as $}from"./Divider-tXRc_fJE.js";import{S as H}from"./Skeleton-YtPd1MEA.js";import{T as p}from"./TextField-CAdIxZRC.js";import"./dividerClasses-D82xR3Cs.js";import"./Select-Dg6xSVFU.js";import"./Menu-C4jIC6eM.js";import"./List-Cx4iqPhx.js";import"./FormControl-B0STjl36.js";const J=R({amount:x().trim().min(1,"Please type your transfer amount"),referralCode:x().trim().min(1,"Please type your referral code"),password:x().trim().min(1,"Please type your transaction password")});function ie(){var g,b,y;const{data:d,isLoading:S,refetch:v}=W(),o=d==null?void 0:d.data;console.log(o);const f=M(),j={amount:"",referralCode:"",password:""},{register:c,handleSubmit:z,watch:E,setError:F,reset:P,formState:{errors:a}}=N({resolver:_(J),defaultValues:j}),[A,{isLoading:G}]=Q(),l=E("referralCode"),{data:t,isError:I,error:u,isFetching:L}=U({referralCode:l},{skip:!l,refetchOnMountOrArgChange:!0,refetchOnReconnect:!0});let n=null;!l||l.trim()===""?n=null:L?n=e.jsx(s,{children:"Loading..."}):I?n=e.jsx(s,{color:"red",children:(g=u==null?void 0:u.data)==null?void 0:g.message}):(b=t==null?void 0:t.data)!=null&&b.name&&(n=e.jsx(s,{children:(y=t==null?void 0:t.data)==null?void 0:y.name}));const k=async q=>{var w,T;try{const r=await A(q).unwrap();r!=null&&r.status&&(v(),P(j),f(C({open:!0,message:r==null?void 0:r.message,severity:"success"})))}catch(r){(w=r==null?void 0:r.data)!=null&&w.data?Object.entries(r.data.data).forEach(([B,O])=>{F(B,{type:"server",message:O})}):f(C({open:!0,message:((T=r==null?void 0:r.data)==null?void 0:T.message)||"Failed to submit. Please try again later.",severity:"error"}))}};return e.jsx(h,{mt:"100px",children:e.jsxs(D,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",mb:"2rem",children:"Internal Transfer"}),e.jsxs(K,{sx:{padding:{xs:"1rem",sm:"2rem"},borderRadius:"2rem",boxShadow:"0 0px 0px 0 rgba(0, 0, 0, 0.19), 0 0px 8px 0 rgba(0, 0, 0, 0.19)"},children:[e.jsx(s,{variant:"h6",m:{xs:"1rem",sm:"0"},children:"Fill details"}),e.jsx($,{sx:{my:"1.2rem"}}),e.jsxs(h,{gap:"2rem",component:"form",onSubmit:z(k),children:[e.jsxs(m,{container:!0,size:12,spacing:2,children:[e.jsxs(m,{item:!0,size:{xs:12,sm:6},children:[e.jsxs(h,{sx:{flexDirection:"row",justifyContent:"space-between"},children:[e.jsx(i,{sx:{mb:".5rem"},children:"Amount to Fund Transfer *"}),e.jsx(i,{sx:{mb:".5rem"},children:S?e.jsx(H,{width:"100px"}):`Balance: ${o==null?void 0:o.PACKAGEBalance}`})]}),e.jsx(p,{...c("amount",{require:!0}),size:"small",fullWidth:!0,placeholder:"Amount transfer",variant:"outlined"}),a.amount&&e.jsx(s,{color:"error",children:a.amount.message})]}),e.jsxs(m,{item:!0,size:{xs:12,sm:6},children:[e.jsx(i,{sx:{mb:".5rem"},children:"User Code *"}),e.jsx(p,{...c("referralCode",{require:!0}),size:"small",fullWidth:!0,placeholder:"Enter user id",variant:"outlined"}),e.jsx(i,{sx:{mb:".5rem"},children:n}),a.referralCode&&e.jsx(s,{color:"error",children:a.referralCode.message})]}),e.jsxs(m,{item:!0,size:{xs:12,sm:6},children:[e.jsx(i,{sx:{mb:".5rem"},children:"Transaction password *"}),e.jsx(p,{...c("password",{require:!0}),size:"small",fullWidth:!0,placeholder:"Transaction password",variant:"outlined"}),a.password&&e.jsx(s,{color:"error",children:a.password.message})]})]}),e.jsx(V,{variant:"contained",size:"small",type:"submit",disabled:G,sx:{textTransform:"capitalize",width:"5rem",boxShadow:"none",bgcolor:"primary.main",fontSize:"1rem",color:"white","&:hover":{boxShadow:"none"}},children:"Submit"})]})]})]})})}export{ie as default};
