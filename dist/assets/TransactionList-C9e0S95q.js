import{k as P,j as e,T as d,r as n,P as k,B as p,S as f,p as v,a as F}from"./index-W3F8g-gH.js";import{c as A,u as I,M as Y}from"./index.esm-E4WJbi0x.js";import{F as B,u as m,w as R}from"./xlsx-mpKnpTpg.js";import{S as _}from"./Skeleton-BIz_sHQH.js";import{S as G}from"./Selector-NdGbpFV5.js";import{d as b}from"./dayjs.min-C4NS9pWR.js";import{C as H}from"./Container-C2chWd_a.js";import"./ExpandMore-B9Cn8QYi.js";import"./Search-FH8B6iNm.js";import"./Checkbox-p5JN4CZ-.js";import"./TableContainer-B81P4XN6.js";import"./Menu--OA5AKCf.js";import"./List-DDMEpOZM.js";import"./DatePicker-CAm8E7jF.js";import"./TextField-D75kfTsg.js";import"./Select-g_WXqCT7.js";import"./FormControl-D84P2tts.js";import"./ListItem-C7LD_4bU.js";import"./MenuItem-CtbLm0in.js";import"./listItemTextClasses-BkWN7RjR.js";import"./dividerClasses-DS1ge3n6.js";import"./KeyboardArrowRight-CgQCly0f.js";import"./ListItemIcon-D0qQFAu1.js";import"./TableRow-CSzPueZR.js";import"./Divider-BWvOf7AV.js";const s=A(),N=[s.display({header:"Login ID",size:40,Cell:()=>{var t;const{data:a,isLoading:r}=P();return e.jsx(d,{children:r?e.jsx(_,{width:100,height:30}):((t=a==null?void 0:a.data)==null?void 0:t.loginId)||"Empty"})}}),s.accessor("balanceType",{header:"Balance Type",size:120}),s.accessor("amount",{header:"Amount",size:150}),s.accessor("status",{header:"Status",size:150}),s.accessor("description",{header:"Description",size:250}),s.accessor("createdAt",{header:"Registration Date",size:200,Cell:({row:a})=>e.jsx(d,{children:new Date(a.original.createdAt).toLocaleString()})})],O=["PENDING","COMPLETED","REJECTED"],W=a=>{const r=m.json_to_sheet(a),t=m.book_new();m.book_append_sheet(t,r,"Sheet1"),R(t,"transactionList.xlsx")};function ge(){var x,h,g;const[a,r]=n.useState({pageIndex:0,pageSize:10}),[t,D]=n.useState({status:"",transactionType:"",startDate:null,endDate:null}),S=t.startDate?b(t.startDate).format("YYYY-MM-DD"):void 0,T=t.endDate?b(t.endDate).format("YYYY-MM-DD"):void 0,{data:o,isLoading:w,isError:u,error:i}=k({page:a.pageIndex+1,sizePerPage:a.pageSize,...t,startDate:S,endDate:T}),j=(x=i==null?void 0:i.data)==null?void 0:x.message,l=((h=o==null?void 0:o.data)==null?void 0:h.docs)||[],y=n.useMemo(()=>N,[]),C=n.useMemo(()=>l,[l]),E=I({columns:y,data:C,enableColumnFilters:!1,enableSorting:!1,enableColumnActions:!1,manualPagination:!0,manualFiltering:!0,rowCount:((g=o==null?void 0:o.data)==null?void 0:g.totalDocs)||0,state:{pagination:a,isLoading:w,showAlertBanner:u},onPaginationChange:r,columnFilterDisplayMode:"popover",enableGlobalFilter:!1,paginationDisplayMode:"pages",positionToolbarAlertBanner:"bottom",muiToolbarAlertBannerProps:u?{color:"error",children:j||"Error loading transactions."}:void 0,renderTopToolbarCustomActions:()=>e.jsx(p,{sx:{display:"flex",gap:2,padding:1,flexWrap:"wrap"},children:e.jsx(F,{variant:"contained",onClick:()=>W(l),startIcon:e.jsx(B,{sx:{color:"white"}}),sx:{textTransform:"none",color:"white",boxShadow:"none",bgcolor:"primary.main","&:hover":{boxShadow:"none"}},children:"Excel"})})}),M=n.useCallback((c,L)=>{D(z=>({...z,[c]:L}))},[]);return e.jsxs(H,{sx:{mt:"100px"},children:[e.jsx(d,{variant:"h5",fontWeight:700,fontSize:"1.8rem",mb:4,children:"Transaction List"}),e.jsx(p,{sx:{display:"flex",flexDirection:{xs:"column",lg:"row"},gap:2,flexWrap:"wrap",mb:4},children:e.jsx(p,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:2},children:e.jsxs(f,{children:[e.jsx(v,{sx:{mb:.5,fontSize:12},children:"Status"}),e.jsx(G,{items:O,value:t.status,onChange:c=>M("status",c.target.value),width:{xs:"100%",sm:200}})]})})}),e.jsx(f,{sx:{mt:4,borderRadius:2,overflow:"hidden"},children:e.jsx(Y,{table:E})})]})}export{ge as default};
